# RAG Service Execution Guide

μ΄ λ¬Έμ„λ” `my-rag-service`μ μ‹¤ν–‰, ν…μ¤νΈ, ν‰κ°€ λ° λ¨λ‹ν„°λ§ λ°©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤.

## 0. μ‚¬μ „ μ¤€λΉ„ (μ„¤μΉ)
ν„°λ―Έλ„μ—μ„ `my-rag-service` ν΄λ”λ΅ μ΄λ™ν• ν›„, ν•„μ”ν• ν¨ν‚¤μ§€λ¥Ό μ„¤μΉν•©λ‹λ‹¤.

```bash
# 1. ν΄λ” μ΄λ™
cd my-rag-service

# 2. μμ΅΄μ„± μ„¤μΉ
pip install -r requirements.txt
```

---

## 1. λ‹¨μ„ ν…μ¤νΈ (Unit Test)
μ‘μ„±λ μ½”λ“κ°€ λ…Όλ¦¬μ μΌλ΅ μ¬λ°”λ¥΄κ² λ™μ‘ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤.
(Mockingμ„ μ‚¬μ©ν•μ—¬ μ‹¤μ  LLM νΈμ¶ μ—†μ΄ λ΅μ§λ§ ν…μ¤νΈν•©λ‹λ‹¤.)

```bash
python -m pytest test_pipeline.py -v
```
- **μ„±κ³µ κΈ°μ¤€**: λ¨λ“  ν…μ¤νΈ ν•­λ©μ— `PASSED`κ°€ ν‘μ‹λμ–΄μ•Ό ν•©λ‹λ‹¤.

---

## 2. ν‰κ°€ λ°μ΄ν„°μ…‹ κµ¬μ¶• (Evaluation)
LangSmithμ— ν‰κ°€μ© λ°μ΄ν„°μ…‹μ„ μƒμ„±ν•κ³ , μλ™ ν‰κ°€λ¥Ό μ¤€λΉ„ν•©λ‹λ‹¤.

```bash
python evaluation.py
```
- **ν™•μΈ**: "Created dataset..." λ©”μ‹μ§€κ°€ μ¶λ ¥λλ©΄ μ„±κ³µμ…λ‹λ‹¤.

---

## 3. μ„λ²„ μ‹¤ν–‰ λ° λ¨λ‹ν„°λ§ (Monitoring)
API μ„λ²„λ¥Ό μ‹¤ν–‰ν•μ—¬ μ‹¤μ‹κ°„ μ”μ²­μ„ μ²λ¦¬ν•κ³  λ¨λ‹ν„°λ§ν•©λ‹λ‹¤.

### 3-1. μ„λ²„ μ‹μ‘
(μƒ ν„°λ―Έλ„μ„ μ—΄μ–΄μ„ μ‹¤ν–‰ν•λ” κ²ƒμ„ κ¶μ¥ν•©λ‹λ‹¤.)

```bash
# Windows
uvicorn main:app --reload

# (μ°Έκ³ ) Python λ²„μ „ λ¬Έμ κ°€ λ°μƒν•  κ²½μ° μ •ν™•ν• κ²½λ΅ μ‚¬μ©:
# C:/Users/asguug/.pyenv/pyenv-win/versions/3.11.9/python.exe -m uvicorn main:app --reload
```
μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‹¤ν–‰λλ©΄ `http://127.0.0.1:8000` μ—μ„ λ€κΈ°ν•©λ‹λ‹¤.

### 3-2. API ν…μ¤νΈ μ”μ²­
μ„λ²„κ°€ μΌμ§„ μƒνƒμ—μ„, APIκ°€ μ λ™μ‘ν•λ”μ§€ ν…μ¤νΈ μ¤ν¬λ¦½νΈλ΅ ν™•μΈν•©λ‹λ‹¤.
(λ λ‹¤λ¥Έ μƒ ν„°λ―Έλ„μ—μ„ μ‹¤ν–‰ν•μ„Έμ”.)

```bash
python test_server.py
```

### 3-3. Swagger UI ν™•μΈ
λΈλΌμ°μ €μ—μ„ μ•„λ μ£Όμ†λ΅ μ ‘μ†ν•λ©΄ API λ¬Έμ„λ¥Ό λ³΄κ³  μ§μ ‘ ν…μ¤νΈν•  μ μμµλ‹λ‹¤.
- [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)

---

## π“‚ μ£Όμ” νμΌ μ„¤λ…
- `main.py`: FastAPI μ„λ²„ μ§„μ…μ  (λ¨λ‹ν„°λ§ λ΅μ§ ν¬ν•¨)
- `pipeline.py`: LangGraph RAG νμ΄ν”„λΌμΈ (μ—μ΄μ „νΈ λ΅μ§)
- `test_pipeline.py`: λ‹¨μ„ ν…μ¤νΈ μ½”λ“
- `evaluation.py`: LangSmith ν‰κ°€ λ°μ΄ν„°μ…‹ μƒμ„± μ¤ν¬λ¦½νΈ
- `models.py`: API μ”μ²­/μ‘λ‹µ λ°μ΄ν„° λ¨λΈ
